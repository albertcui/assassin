<head>
  <link href='http://fonts.googleapis.com/css?family=Arvo|Montserrat' rel='stylesheet' type='text/css'>
	<title>assassin</title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<meta charset="utf-8">

  <style type="text/css">
    html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
  </style>
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=" + Meteor.settings.public.gmaps_api_key>
  </script>
  <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>

  <script type="text/javascript">
    function initialize() {
      var layer = "toner";
      var myLatlng1 = new google.maps.LatLng(53.65914, 0.072050);
      var mapOptions = {
        center: myLatlng1,
        zoom: 8,
        mapTypeId: layer,
    mapTypeControlOptions: {
        mapTypeIds: [layer]
      } }
      var map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);

      map.mapTypes.set(layer, new google.maps.StamenMapType(layer));

      var marker = new google.maps.Marker({
          position: myLatlng1,
          map: map,
          title: 'Hello World!'
        });
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(function(position){
           initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
          map.setCenter(initialLocation);
          map.setZoom(18);
          marker.setPosition(initialLocation);
          watchCurrentPosition();

        });

      }
    }
            function watchCurrentPosition() {
                var positionTimer = navigator.geolocation.watchPosition(
                    function (position) {
                        setMarkerPosition(
                            marker,
                            position
                        );
                    });
            }

            function setMarkerPosition(marker, position) {
                marker.setPosition(
                    new google.maps.LatLng(
                        position.coords.latitude,
                        position.coords.longitude)
                );
            }


    google.maps.event.addDomListener(window, 'load', initialize);

  </script>

</head>


<body>
	<h1>CU Assassins</h1>
	<div id="map-canvas"></div>
</body>


<!-- <template name="hello">
<div id="map-canvas">{{initialize}}</div>
</template> -->
